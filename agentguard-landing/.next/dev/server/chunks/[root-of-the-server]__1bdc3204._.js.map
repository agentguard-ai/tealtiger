{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/satis/OneDrive/AI%20Agent%20Security%20Platform/agentguard-landing/lib/metrics.ts"],"sourcesContent":["/**\r\n * Metrics Utility Functions\r\n * \r\n * Functions to fetch GitHub stars, npm downloads, and PyPI downloads.\r\n */\r\n\r\nexport interface MetricsData {\r\n  githubStars: number;\r\n  npmDownloads: number;\r\n  pypiDownloads: number;\r\n}\r\n\r\n/**\r\n * Fetch GitHub stars for a repository\r\n */\r\nexport async function fetchGitHubStars(repo: string): Promise<number> {\r\n  try {\r\n    const response = await fetch(`https://api.github.com/repos/${repo}`, {\r\n      next: { revalidate: 3600 }, // Cache for 1 hour\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`GitHub API error: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.stargazers_count || 0;\r\n  } catch (error) {\r\n    console.error('Error fetching GitHub stars:', error);\r\n    return 0; // Fallback value\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch npm downloads for a package (last 30 days)\r\n */\r\nexport async function fetchNpmDownloads(packageName: string): Promise<number> {\r\n  try {\r\n    const endDate = new Date();\r\n    const startDate = new Date();\r\n    startDate.setDate(startDate.getDate() - 30);\r\n\r\n    const start = startDate.toISOString().split('T')[0];\r\n    const end = endDate.toISOString().split('T')[0];\r\n\r\n    const response = await fetch(\r\n      `https://api.npmjs.org/downloads/point/${start}:${end}/${packageName}`,\r\n      {\r\n        next: { revalidate: 3600 }, // Cache for 1 hour\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`npm API error: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.downloads || 0;\r\n  } catch (error) {\r\n    console.error('Error fetching npm downloads:', error);\r\n    return 0; // Fallback value\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch PyPI downloads for a package (last 30 days)\r\n * Note: PyPI doesn't have an official API for download stats, so we use pypistats.org\r\n */\r\nexport async function fetchPyPiDownloads(packageName: string): Promise<number> {\r\n  try {\r\n    const response = await fetch(\r\n      `https://pypistats.org/api/packages/${packageName}/recent?period=month`,\r\n      {\r\n        next: { revalidate: 3600 }, // Cache for 1 hour\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`PyPI stats API error: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.data?.last_month || 0;\r\n  } catch (error) {\r\n    console.error('Error fetching PyPI downloads:', error);\r\n    return 0; // Fallback value\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch all metrics in parallel\r\n */\r\nexport async function fetchAllMetrics(): Promise<MetricsData> {\r\n  const [githubStars, npmDownloads, pypiDownloads] = await Promise.all([\r\n    fetchGitHubStars('nagasatish007/ai-agent-security-platform'),\r\n    fetchNpmDownloads('agentguard-sdk'),\r\n    fetchPyPiDownloads('agentguard'),\r\n  ]);\r\n\r\n  return {\r\n    githubStars,\r\n    npmDownloads,\r\n    pypiDownloads,\r\n  };\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;;;;;;AAWM,eAAe,iBAAiB,IAAY;IACjD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,CAAC,6BAA6B,EAAE,MAAM,EAAE;YACnE,MAAM;gBAAE,YAAY;YAAK;QAC3B;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,MAAM,EAAE;QACxD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,gBAAgB,IAAI;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,GAAG,iBAAiB;IAC7B;AACF;AAKO,eAAe,kBAAkB,WAAmB;IACzD,IAAI;QACF,MAAM,UAAU,IAAI;QACpB,MAAM,YAAY,IAAI;QACtB,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;QAExC,MAAM,QAAQ,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QACnD,MAAM,MAAM,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAE/C,MAAM,WAAW,MAAM,MACrB,CAAC,sCAAsC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,aAAa,EACtE;YACE,MAAM;gBAAE,YAAY;YAAK;QAC3B;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,SAAS,MAAM,EAAE;QACrD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,SAAS,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,GAAG,iBAAiB;IAC7B;AACF;AAMO,eAAe,mBAAmB,WAAmB;IAC1D,IAAI;QACF,MAAM,WAAW,MAAM,MACrB,CAAC,mCAAmC,EAAE,YAAY,oBAAoB,CAAC,EACvE;YACE,MAAM;gBAAE,YAAY;YAAK;QAC3B;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,SAAS,MAAM,EAAE;QAC5D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,IAAI,EAAE,cAAc;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,GAAG,iBAAiB;IAC7B;AACF;AAKO,eAAe;IACpB,MAAM,CAAC,aAAa,cAAc,cAAc,GAAG,MAAM,QAAQ,GAAG,CAAC;QACnE,iBAAiB;QACjB,kBAAkB;QAClB,mBAAmB;KACpB;IAED,OAAO;QACL;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/satis/OneDrive/AI%20Agent%20Security%20Platform/agentguard-landing/app/api/metrics/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { fetchAllMetrics } from '@/lib/metrics';\r\n\r\nexport const revalidate = 3600; // Revalidate every hour (ISR)\r\n\r\nexport async function GET() {\r\n  try {\r\n    const metrics = await fetchAllMetrics();\r\n    \r\n    return NextResponse.json(metrics, {\r\n      headers: {\r\n        'Cache-Control': 'public, s-maxage=3600, stale-while-revalidate=7200',\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Error in metrics API route:', error);\r\n    \r\n    // Return fallback values on error\r\n    return NextResponse.json(\r\n      {\r\n        githubStars: 0,\r\n        npmDownloads: 0,\r\n        pypiDownloads: 0,\r\n      },\r\n      {\r\n        status: 200, // Return 200 even on error to prevent client-side errors\r\n        headers: {\r\n          'Cache-Control': 'public, s-maxage=300, stale-while-revalidate=600',\r\n        },\r\n      }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,aAAa,MAAM,8BAA8B;AAEvD,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,4JAAe;QAErC,OAAO,yKAAY,CAAC,IAAI,CAAC,SAAS;YAChC,SAAS;gBACP,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAE7C,kCAAkC;QAClC,OAAO,yKAAY,CAAC,IAAI,CACtB;YACE,aAAa;YACb,cAAc;YACd,eAAe;QACjB,GACA;YACE,QAAQ;YACR,SAAS;gBACP,iBAAiB;YACnB;QACF;IAEJ;AACF"}}]
}